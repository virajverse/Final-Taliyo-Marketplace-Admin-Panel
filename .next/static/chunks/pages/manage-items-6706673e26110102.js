(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{5929:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-items",function(){return s(2711)}])},7935:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},2711:function(e,t,s){"use strict";s.r(t);var a=s(5893),i=s(7294),l=s(6880),r=s(4270),c=s(8655),n=s(2190),d=s(3050),o=s(6127),x=s(7935),m=s(3832),u=s(5928),h=s(4442),p=s(7864),j=s(3156),v=s(6259);t.default=e=>{let{user:t}=e,[s,g]=(0,i.useState)([]),[f,y]=(0,i.useState)([]),[N,b]=(0,i.useState)(!0),[w,_]=(0,i.useState)(""),[C,k]=(0,i.useState)("all"),[S,I]=(0,i.useState)(!1),[Z,z]=(0,i.useState)(null),[E,O]=(0,i.useState)(""),[D,L]=(0,i.useState)(""),[A,P]=(0,i.useState)({title:"",description:"",category:"",type:"service",price:"",whatsapp_link:""});(0,i.useEffect)(()=>{t&&T()},[t]),(0,i.useEffect)(()=>{F()},[s,w,C]);let T=async()=>{try{let{data:e,error:t}=await v.O.from("items").select("*").order("created_at",{ascending:!1});if(t)throw t;g(e||[])}catch(e){console.error("Error loading items:",e),O("Failed to load items")}finally{b(!1)}},F=()=>{let e=s;w&&(e=e.filter(e=>{var t,s;return e.title.toLowerCase().includes(w.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(w.toLowerCase()))||(null===(s=e.category)||void 0===s?void 0:s.toLowerCase().includes(w.toLowerCase()))})),"all"!==C&&(e=e.filter(e=>e.type===C)),y(e)},q=async e=>{e.preventDefault(),O(""),L("");try{let e={...A,price:A.price?parseFloat(A.price):null,is_active:!0,updated_at:new Date().toISOString()};if(Z){let{error:t}=await v.O.from("items").update(e).eq("id",Z.id);if(t)throw t;g(s.map(t=>t.id===Z.id?{...t,...e}:t)),L("Item updated successfully")}else{e.created_at=new Date().toISOString();let{data:t,error:a}=await v.O.from("items").insert([e]).select().single();if(a)throw a;g([t,...s]),L("Item created successfully")}P({title:"",description:"",category:"",type:"service",price:"",whatsapp_link:""}),I(!1),z(null)}catch(e){console.error("Error saving item:",e),O("Failed to save item")}},U=e=>{P({title:e.title,description:e.description||"",category:e.category||"",type:e.type,price:e.price||"",whatsapp_link:e.whatsapp_link||""}),z(e),I(!0)},X=async e=>{if(confirm("Are you sure you want to delete this item?"))try{let{error:t}=await v.O.from("items").delete().eq("id",e);if(t)throw t;g(s.filter(t=>t.id!==e)),L("Item deleted successfully")}catch(e){console.error("Error deleting item:",e),O("Failed to delete item")}},M=async(e,t)=>{try{let{error:a}=await v.O.from("items").update({is_active:!t,updated_at:new Date().toISOString()}).eq("id",e);if(a)throw a;g(s.map(s=>s.id===e?{...s,is_active:!t}:s)),L("Item ".concat(t?"deactivated":"activated"," successfully"))}catch(e){console.error("Error updating item status:",e),O("Failed to update item status")}};return t?(0,a.jsx)(l.Z,{user:t,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Items"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Create, edit, and manage services, products, and packages."})]}),(0,a.jsxs)("button",{onClick:()=>{I(!0),z(null),P({title:"",description:"",category:"",type:"service",price:"",whatsapp_link:""})},className:"btn-primary flex items-center",children:[(0,a.jsx)(r.Z,{size:16,className:"mr-2"}),"Add Item"]})]}),E&&(0,a.jsx)("div",{className:"alert-error",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(c.Z,{size:20,className:"mr-2 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:E}),(0,a.jsx)("button",{onClick:()=>O(""),className:"ml-auto",children:(0,a.jsx)(n.Z,{size:16})})]})}),D&&(0,a.jsx)("div",{className:"alert-success",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(d.Z,{size:20,className:"mr-2 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{children:D}),(0,a.jsx)("button",{onClick:()=>L(""),className:"ml-auto",children:(0,a.jsx)(n.Z,{size:16})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsx)("div",{className:"flex-1 min-w-64",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search items...",value:w,onChange:e=>_(e.target.value),className:"form-input pl-10"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{size:16,className:"text-gray-500"}),(0,a.jsxs)("select",{value:C,onChange:e=>k(e.target.value),className:"form-input w-auto",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"service",children:"Services"}),(0,a.jsx)("option",{value:"product",children:"Products"}),(0,a.jsx)("option",{value:"package",children:"Packages"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Items (",f.length,")"]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:N?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading items..."})]}):f.length>0?(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Title"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Category"}),(0,a.jsx)("th",{children:"Price"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Created"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:f.map(e=>{var t,s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[null===(t=e.description)||void 0===t?void 0:t.slice(0,50),(null===(s=e.description)||void 0===s?void 0:s.length)>50&&"..."]})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("service"===e.type?"bg-blue-100 text-blue-800":"product"===e.type?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:e.type})}),(0,a.jsx)("td",{children:e.category||"Uncategorized"}),(0,a.jsx)("td",{children:e.price?"â‚¹".concat(e.price):"Not set"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>M(e.id,e.is_active),className:"text-blue-600 hover:text-blue-800",title:e.is_active?"Deactivate":"Activate",children:e.is_active?(0,a.jsx)(m.Z,{size:16}):(0,a.jsx)(u.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>U(e),className:"text-green-600 hover:text-green-800",title:"Edit",children:(0,a.jsx)(h.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>X(e.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,a.jsx)(p.Z,{size:16})})]})})]},e.id)})})]}):(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(j.Z,{size:48,className:"mx-auto text-gray-300 mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No items found"})]})})]}),S&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:Z?"Edit Item":"Add New Item"}),(0,a.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:A.title,onChange:e=>P({...A,title:e.target.value}),className:"form-input",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Type *"}),(0,a.jsxs)("select",{value:A.type,onChange:e=>P({...A,type:e.target.value}),className:"form-input",required:!0,children:[(0,a.jsx)("option",{value:"service",children:"Service"}),(0,a.jsx)("option",{value:"product",children:"Product"}),(0,a.jsx)("option",{value:"package",children:"Package"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Description"}),(0,a.jsx)("textarea",{value:A.description,onChange:e=>P({...A,description:e.target.value}),className:"form-input",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Category"}),(0,a.jsx)("input",{type:"text",value:A.category,onChange:e=>P({...A,category:e.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Price"}),(0,a.jsx)("input",{type:"number",value:A.price,onChange:e=>P({...A,price:e.target.value}),className:"form-input",step:"0.01",min:"0"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"WhatsApp Link"}),(0,a.jsx)("input",{type:"url",value:A.whatsapp_link,onChange:e=>P({...A,whatsapp_link:e.target.value}),className:"form-input",placeholder:"https://wa.me/..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{I(!1),z(null)},className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn-primary",children:Z?"Update Item":"Create Item"})]})]})]})})})]})}):null}}},function(e){e.O(0,[941,736,982,888,774,179],function(){return e(e.s=5929)}),_N_E=e.O()}]);